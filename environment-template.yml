name: news-collector
channels:
  - defaults
dependencies:
  - python=3.11
variables:
  AI_API_BASE_URL: https://dashscope.aliyuncs.com/compatible-mode/v1
  AI_API_MODEL: qwen-flash
  AI_API_KEY: "sk-a5f98c92fa9c4d95a0009e39595fb8b4"
  AI_API_TIMEOUT: "30"
  AI_REQUEST_INTERVAL: "0"
  AI_SCORE_WEIGHTS: ""
  # Feishu bot credentials (set your real values in local env)
  FEISHU_APP_ID: "cli_a875d3094efed00d"
  FEISHU_APP_SECRET: "LR7tbUTyaW7FC2DMVUzLCctPTzUNJWd5"
  # Optional: default chat to send messages to (bot must be in the group)
  FEISHU_DEFAULT_CHAT_ID: ""
  # Optional: Feishu Open API base
  FEISHU_API_BASE: "https://open.feishu.cn"
  # Collector concurrency and HTTP controls
  COLLECTOR_SOURCE_CONCURRENCY: "10"              # max sources in parallel
  COLLECTOR_PER_SOURCE_CONCURRENCY: "1"           # per-source detail concurrency (1 = serial)
  COLLECTOR_GLOBAL_HTTP_CONCURRENCY: "16"         # global in-flight HTTP requests limit
  COLLECTOR_PER_HOST_MIN_INTERVAL_MS: "500"       # min interval per host with jitter
  COLLECTOR_TIMEOUT_CONNECT: "5"                  # seconds
  COLLECTOR_TIMEOUT_READ: "10"                    # seconds
  COLLECTOR_RETRY_MAX: "3"                        # simple retry attempts for transient errors
  COLLECTOR_RETRY_BACKOFF_BASE: "0.6"             # base seconds for exponential backoff
  COLLECTOR_DISABLE_CONCURRENCY: ""               # set to 1/true to force serial execution
  BACKEND_PORT: "8001"
  FRONTEND_PORT: "5180"
  FRONTEND_SITE_ICON: "data/agentduck.png"
  FRONTEND_BASE_URL: "https://jp.pangruitao.com"
prefix: /home/pp/miniconda3/envs/news-collector
